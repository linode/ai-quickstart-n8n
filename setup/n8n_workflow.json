[
  {
    "updatedAt": "2025-12-16T08:20:08.433Z",
    "createdAt": "2025-12-14T15:21:21.164Z",
    "id": "KLGDPLxs0hOKqo9p",
    "name": "Demo: RAG in n8n with self-hosted models",
    "description": null,
    "active": false,
    "isArchived": false,
    "nodes": [
      {
        "parameters": {
          "formTitle": "Upload your data to test RAG",
          "formFields": {
            "values": [
              {
                "fieldLabel": "Upload your file(s)",
                "fieldType": "file",
                "acceptFileTypes": ".pdf, .csv",
                "requiredField": true
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.formTrigger",
        "typeVersion": 2.2,
        "position": [
          -128,
          0
        ],
        "id": "f7a656ec-83fc-4ed2-a089-57a9def662b7",
        "name": "Upload your file here",
        "webhookId": "82848bc4-5ea2-4e5a-8bb6-3c09b94a8c5d"
      },
      {
        "parameters": {
          "dataType": "binary",
          "textSplittingMode": "custom",
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
        "typeVersion": 1.1,
        "position": [
          272,
          128
        ],
        "id": "94aecac0-03f9-4915-932b-d14a2576607b",
        "name": "Default Data Loader"
      },
      {
        "parameters": {
          "content": "### Readme\nLoad your data into a vector database with the üìö **Load Data** flow, and then use your data as chat context with the üêï **Retriever** flow.\n\n**Quick start**\n1. Click on the `Execute Workflow` button to run the üìö **Load Data** flow.\n2. Click on `Open Chat` button to run the üêï **Retriever** flow. Then ask a question about content from your document(s)\n\n\nFor more info, check [our docs on RAG in n8n](https://docs.n8n.io/advanced-ai/rag-in-n8n/).",
          "height": 300,
          "width": 440,
          "color": 4
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -656,
          -64
        ],
        "typeVersion": 1,
        "id": "0d07742b-0b36-4c2e-990c-266cbe6e2d4d",
        "name": "Sticky Note"
      },
      {
        "parameters": {
          "content": "### üìö Load Data Flow",
          "height": 444,
          "width": 716,
          "color": 7
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -192,
          -64
        ],
        "typeVersion": 1,
        "id": "d19d04f3-5231-4e47-bed7-9f24a4a8f582",
        "name": "Sticky Note1"
      },
      {
        "parameters": {
          "options": {
            "systemMessage": "use knowledge_query tool to fetch data from vector_store. \ntool_choice='required'"
          }
        },
        "type": "@n8n/n8n-nodes-langchain.agent",
        "typeVersion": 2,
        "position": [
          944,
          -16
        ],
        "id": "579aed76-9644-42d1-ac13-7369059ff1c2",
        "name": "AI Agent"
      },
      {
        "parameters": {
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.chatTrigger",
        "typeVersion": 1.1,
        "position": [
          720,
          -16
        ],
        "id": "9c30de61-935a-471f-ae88-ec5f67beeefc",
        "name": "When chat message received",
        "webhookId": "4091fa09-fb9a-4039-9411-7104d213f601"
      },
      {
        "parameters": {
          "content": "### üêï 2. Retriever Flow",
          "height": 444,
          "width": 696,
          "color": 7
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          608,
          -64
        ],
        "typeVersion": 1,
        "id": "28bc73a1-e64a-47bf-ac1c-ffe644894ea5",
        "name": "Sticky Note2"
      },
      {
        "parameters": {
          "content": "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n### Embeddings\nThe Insert and Retrieve operation use the same embedding node. \n\n### Reranker\nFurther improve precision of retrieved contents",
          "height": 336,
          "width": 496,
          "color": 4
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          304,
          400
        ],
        "typeVersion": 1,
        "id": "0cf8c647-418c-4d1a-8952-766145afca72",
        "name": "Sticky Note3"
      },
      {
        "parameters": {
          "mode": "insert",
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
        "typeVersion": 1.3,
        "position": [
          96,
          0
        ],
        "id": "66ca2d52-7c21-4c53-b153-a3ce16a75cad",
        "name": "Postgres PGVector Store",
        "credentials": {
          "postgres": {
            "id": "bvesZfyiZgtJUNIz",
            "name": "Postgres account"
          }
        }
      },
      {
        "parameters": {
          "contextWindowLength": 10
        },
        "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
        "typeVersion": 1.3,
        "position": [
          864,
          176
        ],
        "id": "102fe7e7-416c-40ad-b6bb-a3b2decc2e23",
        "name": "Postgres Chat Memory",
        "credentials": {
          "postgres": {
            "id": "bvesZfyiZgtJUNIz",
            "name": "Postgres account"
          }
        }
      },
      {
        "parameters": {
          "mode": "retrieve-as-tool",
          "toolDescription": "retrieve documents from knowledge store",
          "topK": 20,
          "useReranker": true,
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
        "typeVersion": 1.3,
        "position": [
          1008,
          176
        ],
        "id": "13c730ba-f3ff-4551-825f-690cbfaebc4a",
        "name": "PGVector Retrival",
        "credentials": {
          "postgres": {
            "id": "bvesZfyiZgtJUNIz",
            "name": "Postgres account"
          }
        }
      },
      {
        "parameters": {
          "model": "BAAI/bge-m3",
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
        "typeVersion": 1.2,
        "position": [
          384,
          448
        ],
        "id": "6ea78663-cf2f-4f2d-8e68-43047c2afd87",
        "name": "Embeddings BAAI/bge-m3",
        "credentials": {
          "openAiApi": {
            "id": "EHKI1R5F5eKRIyRk",
            "name": "embedding"
          }
        }
      },
      {
        "parameters": {
          "endpoint": "http://reranker:8002/v1/rerank",
          "topK": 5,
          "threshold": 0.7
        },
        "type": "n8n-nodes-universal-reranker.universalRerankerProvider",
        "typeVersion": 1,
        "position": [
          640,
          448
        ],
        "id": "669393bd-05cc-49a0-973e-06713c366210",
        "name": "Reranker BAAI/bge-reranker-v2-m3",
        "credentials": {
          "openAiApi": {
            "id": "iBHUFJGK3gXmLDsw",
            "name": "reranker"
          }
        }
      },
      {
        "parameters": {
          "model": {
            "__rl": true,
            "value": "openai/gpt-oss-20b",
            "mode": "list",
            "cachedResultName": "openai/gpt-oss-20b"
          },
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
        "typeVersion": 1.2,
        "position": [
          720,
          176
        ],
        "id": "b5aa8942-9cd5-4c2f-bd77-7a0ceb921bac",
        "name": "openai/gpt-oss-20b",
        "credentials": {
          "openAiApi": {
            "id": "nZoGPc0JCPLTVAyl",
            "name": "vllm"
          }
        }
      },
      {
        "parameters": {
          "chunkOverlap": 200,
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
        "typeVersion": 1,
        "position": [
          432,
          256
        ],
        "id": "2cf54361-5a57-4e45-be01-961160e0d8a2",
        "name": "Recursive Character Text Splitter"
      }
    ],
    "connections": {
      "Upload your file here": {
        "main": [
          [
            {
              "node": "Postgres PGVector Store",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Default Data Loader": {
        "ai_document": [
          [
            {
              "node": "Postgres PGVector Store",
              "type": "ai_document",
              "index": 0
            }
          ]
        ]
      },
      "When chat message received": {
        "main": [
          [
            {
              "node": "AI Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Postgres Chat Memory": {
        "ai_memory": [
          [
            {
              "node": "AI Agent",
              "type": "ai_memory",
              "index": 0
            }
          ]
        ]
      },
      "AI Agent": {
        "main": [
          []
        ]
      },
      "PGVector Retrival": {
        "ai_tool": [
          [
            {
              "node": "AI Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Embeddings BAAI/bge-m3": {
        "ai_embedding": [
          [
            {
              "node": "Postgres PGVector Store",
              "type": "ai_embedding",
              "index": 0
            },
            {
              "node": "PGVector Retrival",
              "type": "ai_embedding",
              "index": 0
            }
          ]
        ]
      },
      "Reranker BAAI/bge-reranker-v2-m3": {
        "ai_reranker": [
          [
            {
              "node": "PGVector Retrival",
              "type": "ai_reranker",
              "index": 0
            }
          ]
        ]
      },
      "openai/gpt-oss-20b": {
        "ai_languageModel": [
          [
            {
              "node": "AI Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Recursive Character Text Splitter": {
        "ai_textSplitter": [
          [
            {
              "node": "Default Data Loader",
              "type": "ai_textSplitter",
              "index": 0
            }
          ]
        ]
      },
      "Postgres PGVector Store": {
        "main": [
          []
        ]
      }
    },
    "settings": {
      "executionOrder": "v1"
    },
    "staticData": null,
    "meta": {
      "templateId": "rag-starter-template",
      "templateCredsSetupCompleted": true
    },
    "pinData": {},
    "versionId": "9aa41965-1372-4716-88ee-c806f553f1da",
    "activeVersionId": null,
    "versionCounter": 8,
    "triggerCount": 0,
    "tags": [],
    "shared": [
      {
        "updatedAt": "2025-12-14T15:21:21.165Z",
        "createdAt": "2025-12-14T15:21:21.165Z",
        "role": "workflow:owner",
        "workflowId": "KLGDPLxs0hOKqo9p",
        "projectId": "qrN8XqOA6xHjBklq",
        "project": {
          "updatedAt": "2025-12-14T13:45:23.707Z",
          "createdAt": "2025-12-14T13:42:30.687Z",
          "id": "qrN8XqOA6xHjBklq",
          "name": "takashi ito <taito@akamai.com>",
          "type": "personal",
          "icon": null,
          "description": null
        }
      }
    ]
  }
]